<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Heavy Duty Productions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; margin:0; background:#111; color:#eee; }
    header { padding:1rem; text-align:center; background:#000; }
    header img { height:60px; }
    nav { display:flex; justify-content:center; gap:2rem; background:#222; padding:0.5rem; }
    nav a { color:#eee; text-decoration:none; font-weight:bold; }
    nav a[aria-current="page"] { color:#0ff; }
    main { padding:1rem; }
    .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:1rem; }
    .grid img { width:100%; cursor:pointer; }
    .modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); display:none; align-items:center; justify-content:center; }
    .modal img { max-width:90%; max-height:90%; }
    .modal.show { display:flex; }
    .close { position:absolute; top:1rem; right:2rem; font-size:2rem; color:#fff; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <img src="heavy-duty.png" alt="Heavy Duty Productions Logo">
    <h1>Heavy Duty Productions</h1>
  </header>

  <nav aria-label="Sections">
    <a class="tab" data-route="/" href="#/">Home</a>
    <a class="tab" data-route="/hoodies" href="#/hoodies">Hoodies</a>
    <a class="tab" data-route="/tshirts" href="#/tshirts">T-Shirts</a>
    <a class="tab" data-route="/production-images" href="#/production-images">Production Images</a>
  </nav>

  <main>
    <!-- Home content -->
    <section id="home" data-view="home">
      <h2>Welcome to Heavy Duty Productions</h2>
      <p>This is the official store landing page. Choose a category above to browse our products.</p>
    </section>

    <!-- Image grid -->
    <section id="grid" hidden>
      <div class="grid" id="imageGrid"></div>
    </section>
  </main>

  <!-- Modal viewer -->
  <div class="modal" id="modal">
    <span class="close" id="closeBtn">&times;</span>
    <img id="modalImg" src="" alt="">
  </div>

  <script>
    const grid = document.getElementById("grid");
    const imageGrid = document.getElementById("imageGrid");
    const home = document.getElementById("home");
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");
    const closeBtn = document.getElementById("closeBtn");

    const CATEGORIES = {
      hoodies: "Hoodies/",
      tshirts: "T-Shirts/",
      "production-images": "Production Images/"
    };

    function clearGrid() {
      imageGrid.innerHTML = "";
    }

    function showModal(src) {
      modalImg.src = src;
      modal.classList.add("show");
    }

    function closeModal() {
      modal.classList.remove("show");
    }

    closeBtn.onclick = closeModal;
    modal.onclick = e => { if(e.target===modal) closeModal(); };

    async function loadCategory(cat) {
      clearGrid();
      if (!cat) {
        home.hidden = false;
        grid.hidden = true;
        return;
      }
      home.hidden = true;
      grid.hidden = false;
      const folder = CATEGORIES[cat];
      for (let i=1; i<=9999; i++) {
        const num = String(i).padStart(4,"0");
        for (const ext of [".jpg",".jpeg",".png",".webp"]) {
          const src = `${folder}IMG_${num}${ext}`;
          try {
            const res = await fetch(src, {method:"HEAD"});
            if(res.ok) {
              const img = document.createElement("img");
              img.src = src;
              img.alt = cat+" "+num;
              img.onclick = ()=>showModal(src);
              imageGrid.appendChild(img);
              break;
            }
          } catch(e){}
        }
      }
    }

    function route() {
      const hash = location.hash.replace(/^#/,"") || "/";
      document.querySelectorAll(".tab").forEach(a=>a.removeAttribute("aria-current"));
      const active = document.querySelector(\`.tab[href="#\${hash}"]\`);
      if(active) active.setAttribute("aria-current","page");
      if(hash==="/"||hash==="") loadCategory(null);
      else if(hash.startsWith("/hoodies")) loadCategory("hoodies");
      else if(hash.startsWith("/tshirts")) loadCategory("tshirts");
      else if(hash.startsWith("/production-images")) loadCategory("production-images");
      else loadCategory(null);
    }

    window.addEventListener("hashchange", route);
    window.addEventListener("load", route);
  </script>
</body>
</html>
