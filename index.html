<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heavy Duty Productions</title>
  <style>
    :root { color-scheme: dark; }
    /* Overspray font (WOFF2 first) */
    @font-face {
      font-family: 'Overspray';
      src:
        url('Overspray.woff2') format('woff2'),
        url('Overspray-PAWZ.ttf') format('truetype'),
        url('fonts/Overspray.woff2') format('woff2'),
        url('fonts/Overspray-PAWZ.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }

    * {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      font-synthesis: none;
    }

    body { margin:0; background:#0f0f10; color:#ececec; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    header { padding:18px 12px; text-align:center; background:#000; border-bottom:1px solid #1d1d1f; }
    header img { height:64px; display:block; margin:0 auto 6px; }
    header h1 { margin:4px 0 0; font-family:'Overspray', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; letter-spacing:.2px; font-weight:400; }

    nav { position:sticky; top:0; z-index:10; display:flex; gap:18px; justify-content:center; align-items:center;
          padding:10px 12px; background:rgba(20,20,22,.96); border-bottom:1px solid #1f1f22; backdrop-filter: blur(6px); }
    nav a {
      text-decoration:none; color:#e8e8e8; padding:8px 10px; border-radius:8px; letter-spacing:.2px;
      font-family:'Overspray', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; font-size:1rem;
    }
    nav a[aria-current="page"] { color:#00e5ff; background:#151518; box-shadow: inset 0 0 0 1px #26262a; }

    main { padding:16px; max-width:1200px; margin:0 auto; }
    h2, p { font-family:'Overspray', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; letter-spacing:.2px; font-weight:400; }
    #home h2 { margin: 16px 0 6px; line-height:1.25; }
    #home p { margin: 0 0 12px; opacity: .95; line-height:1.25; }

    /* HOME hero: no gray frame */
    .hero { display:block; max-width:900px; width:96%; margin:14px auto 0; border-radius:14px; box-shadow: 0 8px 24px rgba(0,0,0,.35); }
    /* Gallery grid â€” gray background on tiles only */
    .grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(220px,1fr)); gap:14px; }
    .card {
      background: rgb(185,185,185);
      border-radius:10px;
      overflow:hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,.25);
      display:flex; align-items:center; justify-content:center;
      padding: 6px;
    }
    .card img {
      width: 100%;
      height: 100%;
      object-fit: contain;  /* show full image */
      background: rgb(185,185,185);
      display:block;
      border-radius:6px;
    
      background: rgb(185,185,185);
    
      background: rgb(185,185,185);
    }
    .hidden { display:none; }
  
    /* Lightbox overlay */
    #lbOverlay{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999}
    #lbOverlay img{max-width:95vw;max-height:95vh;object-fit:contain;background:rgb(185,185,185);border-radius:8px}
    #lbClose{position:absolute;top:14px;right:14px;cursor:pointer;font-size:28px;line-height:1;color:#fff;background:transparent;border:0}
        
    nav a.active { background: red; color: #fff; }
</style>
</head>
<body>
  <header>
    <img src="heavy-duty.png" alt="Heavy Duty Productions Logo">
    <h1>Heavy Duty Productions</h1>
  </header>

  <nav aria-label="Primary">
    <a class="tab" href="#/">HOME</a>
    <a class="tab" href="#/hoodies">HOODIES</a>
    <a class="tab" href="#/tshirts">T-SHIRTS</a>
    <a class="tab" href="#/production-images">PRODUCTION IMAGES</a>
  </nav>

  <main>
    <section id="home">
      <h2>Welcome</h2>
      <p>Choose a category above to browse images.</p>
      <img class="hero" src="heavy-duty.png" alt="Heavy Duty Productions Hero">
    </section>

    <section id="gallery" class="hidden">
      <div class="grid" id="imageGrid"></div>
      <div id="emptyMsg" class="hidden">No images found.</div>
    </section>
  </main>

  

<script>
// === Scorpion-mirror loader ===
// Folders map 1:1 to tabs; filenames are strict range IMG_0001.(png|jpg) ... IMG_9999.(png|jpg)
const DIRS = { "hoodies": "Hoodies", "tshirts": "T-Shirts", "production-images": "Production Images" };

const home = document.getElementById('home');
const gallery = document.getElementById('gallery');
const grid = document.getElementById('imageGrid') || document.getElementById('grid');
const emptyMsg = document.getElementById('emptyMsg') || document.getElementById('empty');

function setActive(hash){
  document.querySelectorAll('nav a').forEach(a => {
    const h = a.getAttribute('href') || '';
    const isActive = (h === hash) || (h === '#/' && (hash === '#/' || hash === '#'));
    a.classList.toggle('active', isActive);
  });
}

function encPath(path){ return path.split('/').map(encodeURIComponent).join('/'); }
function pad4(n){ return String(n).padStart(4,'0'); }

function makeCard(dir, idx){
  const a = document.createElement('a');
  a.className = 'card';
  // Try .png first, then .jpg; anchor always points at whatever successfully loads
  const png = `${dir}/IMG_${pad4(idx)}.png`;
  const jpg = `${dir}/IMG_${pad4(idx)}.jpg`;

  const img = document.createElement('img');
  img.loading = 'lazy';
  img.decoding = 'async';
  img.alt = `IMG_${pad4(idx)}`;
  img.src = png;

  a.href = png;
  a.target = '_blank';
  a.rel = 'noopener';

  let triedJpg = false;
  img.onerror = () => {
    if (!triedJpg){
      triedJpg = true;
      img.onerror = () => { a.remove(); }; // if jpg fails too, remove card entirely
      img.src = jpg;
      a.href = jpg;
    } else {
      a.remove();
    }
  };

  a.appendChild(img);
  return a;
}

let RENDER_TOKEN = 0; // cancel token to prevent glitches when switching tabs

function showHome(){
  RENDER_TOKEN++;
  setActive('#/');
  if (gallery) gallery.classList.add('hidden');
  if (home) home.classList.remove('hidden');
}

function renderList(key, token){
  if (!grid){ return; }
  grid.innerHTML = '';
  emptyMsg && emptyMsg.classList.add('hidden');
  const dirName = DIRS[key];
  if (!dirName){ emptyMsg && emptyMsg.classList.remove('hidden'); return; }
  const dir = encPath(dirName);

  let i = 1;
  const BATCH = 120; // fast but smooth

  function pump(){
    if (token !== RENDER_TOKEN) return;
    let added = 0;
    while (added < BATCH && i <= 9999){
      const card = makeCard(dir, i);
      grid.appendChild(card);
      i++; added++;
    }
    if (i <= 9999){
      (window.requestIdleCallback ? requestIdleCallback : (fn)=>setTimeout(fn,0))(pump, {timeout: 100});
    } else if (!grid.children.length){
      emptyMsg && emptyMsg.classList.remove('hidden');
    }
  }
  pump();
}

function showGallery(key){
  RENDER_TOKEN++;
  const token = RENDER_TOKEN;
  setActive('#/' + key);
  if (home) home.classList.add('hidden');
  if (gallery) gallery.classList.remove('hidden');
  renderList(key, token);
}

function route(){
  const hash = (location.hash || '#/');
  if (hash === '#/' || hash === '#') return showHome();
  if (hash.startsWith('#/hoodies')) return showGallery('hoodies');
  if (hash.startsWith('#/tshirts')) return showGallery('tshirts');
  if (hash.startsWith('#/production-images')) return showGallery('production-images');
  return showHome();
}

document.addEventListener('DOMContentLoaded', route);
window.addEventListener('hashchange', route);
</script>

</body>

</html>
