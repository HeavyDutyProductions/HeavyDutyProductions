<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heavy Duty Productions</title>

  <!--
    GitHub Pages project sites are hosted at:
    https://<user>.github.io/<repo>/
    so *root-relative* links like "/production-images" will break.
    This file fixes that by:
      1) Using relative links (./...) everywhere.
      2) Rewriting any accidental root-relative links at runtime to include the repo path.
  -->

  <!-- Make all relative links resolve from the current directory -->
  <base href="./" />

  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; color: #111; }
    header { padding: 1rem 1.5rem; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
    nav a { margin-right: 1rem; text-decoration: none; color: #0366d6; }
    nav a:last-child { margin-right: 0; }
    main { padding: 1.5rem; max-width: 900px; margin: 0 auto; }
    .note { background: #f6f8fa; border: 1px solid #e1e4e8; padding: 1rem; border-radius: .5rem; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 12px; margin-top: 1rem; }
    figure { margin: 0; border: 1px solid #eee; border-radius: .5rem; overflow: hidden; background: white; }
    figure img { display: block; width: 100%; height: 160px; object-fit: cover; }
    figure figcaption { font-size: .9rem; padding: .5rem .75rem; color: #444; }
    footer { padding: 2rem 1.5rem; color: #666; text-align: center; border-top: 1px solid #eee; margin-top: 2rem; }
    code { background: #f0f0f0; padding: .15rem .35rem; border-radius: 4px; }
  </style>

  <script>
    // --- GitHub Pages project base-path fixer ---
    // If any link/src accidentally starts with "/" (root), rewrite it to "/<repo>/..."
    document.addEventListener("DOMContentLoaded", function () {
      // Detect repo segment for project pages, e.g. /HeavyDutyProductions/
      // pathname like "/HeavyDutyProductions/" => ["", "HeavyDutyProductions", ""]
      var parts = window.location.pathname.split("/").filter(Boolean);
      var repo = parts.length > 0 ? "/" + parts[0] : ""; // "/HeavyDutyProductions" or "" for user/org sites
      function fixAttr(selector, attr) {
        document.querySelectorAll(selector).forEach(function (el) {
          var val = el.getAttribute(attr);
          if (!val) return;
          if (val.startsWith("//")) return; // protocol-relative; leave alone
          if (val.startsWith("http://") || val.startsWith("https://") || val.startsWith("mailto:") || val.startsWith("tel:")) return;
          if (val.startsWith("/")) {
            // Convert "/something" => "/<repo>/something" when repo exists
            el.setAttribute(attr, (repo ? repo : "") + val);
          }
        });
      }
      fixAttr("a[href]", "href");
      fixAttr("img[src]", "src");
      fixAttr("script[src]", "src");
      fixAttr("link[rel='stylesheet'][href]", "href");
    });

    // --- Tiny hash-router for sections (/#/production-images) ---
    function showSection(id) {
      document.querySelectorAll("section[data-route]").forEach(function (s) {
        s.style.display = (s.id === id) ? "block" : "none";
      });
    }
    function handleRoute() {
      // Expect routes like "#/production-images"
      var hash = window.location.hash || "#/";
      var route = hash.replace(/^#\//, ""); // "production-images" or ""
      if (!route) route = "home";
      if (!document.getElementById(route)) route = "home";
      showSection(route);
    }
    window.addEventListener("hashchange", handleRoute);
    window.addEventListener("DOMContentLoaded", handleRoute);
  </script>
</head>

<body>
  <header>
    <strong>Heavy Duty Productions</strong>
    <nav>
      <!-- Use relative links or hash-routes -->
      <a href="#/">Home</a>
      <a href="#/production-images">Production Images</a>
      <a href="./about.html">About</a>
    </nav>
  </header>

  <main>
    <section id="home" data-route>
      <h1>Welcome</h1>
      <p class="note">
        This page uses relative links and a small script to automatically fix any accidental root-relative paths so it works under
        <code>/HeavyDutyProductions/</code> on GitHub Pages.
      </p>
      <p>
        If you previously had links like <code>&lt;img src="/production-images/pic.jpg"&gt;</code>, they will be rewritten at runtime to include
        the repository path so they don't 404 on GitHub Pages.
      </p>
    </section>

    <section id="production-images" data-route style="display:none;">
      <h1>Production Images</h1>
      <p>Example gallery below. Replace with your real image files in <code>./production-images/</code>.</p>
      <div class="grid">
        <!-- EXAMPLE images using *relative* paths (replace these with your real files) -->
        <figure>
          <img src="./production-images/sample-1.jpg" alt="Sample 1">
          <figcaption>Sample 1</figcaption>
        </figure>
        <figure>
          <img src="./production-images/sample-2.jpg" alt="Sample 2">
          <figcaption>Sample 2</figcaption>
        </figure>
        <figure>
          <img src="./production-images/sample-3.jpg" alt="Sample 3">
          <figcaption>Sample 3</figcaption>
        </figure>
      </div>
    </section>
  </main>

  <footer>
    <small>&copy; <span id="year"></span> Heavy Duty Productions</small>
  </footer>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
